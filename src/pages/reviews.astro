---
import Layout from '../layouts/Layout.astro';

// Add your reviews here - copy from Google, Yelp, etc.
const reviews = [
  {
    name: 'John D.',
    rating: 5,
    date: 'December 2025',
    text: 'Called M & M Plumbing for a clogged drain and they came out the same day. Very professional and got the job done quickly. Fair pricing too. Highly recommend!',
    source: 'Google',
  },
  {
    name: 'Sarah M.',
    rating: 5,
    date: 'November 2025',
    text: "We've used M & M Plumbing for years. They installed our water heater and have done several repairs. Always reliable and honest. You won't find better plumbers in Greeneville.",
    source: 'Google',
  },
  {
    name: 'Robert K.',
    rating: 5,
    date: 'October 2025',
    text: "Had a leak under my kitchen sink that I couldn't fix myself. M & M came out, found the problem, and had it fixed in no time. Great service!",
    source: 'Google',
  },
  {
    name: 'Linda T.',
    rating: 5,
    date: 'September 2025',
    text: 'Professional, punctual, and reasonably priced. They replaced all the plumbing in our bathroom renovation. Everything works perfectly. Thank you!',
    source: 'Yelp',
  },
  {
    name: 'Mike H.',
    rating: 5,
    date: 'August 2025',
    text: "Emergency call on a Saturday for a burst pipe. They answered right away and were at my house within the hour. Saved us from major water damage. Can't thank them enough!",
    source: 'Google',
  },
  {
    name: 'Patricia W.',
    rating: 5,
    date: 'July 2025',
    text: "Been using M & M since they started. Wouldn't trust anyone else with my plumbing. Family business that treats you like family.",
    source: 'Google',
  },
];

// Calculate average rating
const avgRating = (reviews.reduce((sum, r) => sum + r.rating, 0) / reviews.length).toFixed(1);

function renderStars(rating: number) {
  return Array(5)
    .fill(0)
    .map((_, i) => (i < rating ? '★' : '☆'))
    .join('');
}
---

<Layout
  title="Reviews"
  description="Read reviews from M & M Plumbing customers in Greeneville, TN. See why our customers trust us for their plumbing needs."
>
  <!-- Hero Header -->
  <section class="relative bg-primary-900 text-white py-20">
    <div
      class="absolute inset-0 bg-gradient-to-br from-primary-800 via-primary-900 to-dark opacity-95"
    >
    </div>
    <div class="container mx-auto px-4 relative z-10 text-center">
      <h1 class="text-4xl md:text-5xl font-bold mb-4">Customer Reviews</h1>
      <p class="text-xl text-primary-100 max-w-2xl mx-auto mb-6">
        See what our customers are saying about M & M Plumbing.
      </p>
      <div class="inline-flex items-center gap-3 bg-white/10 backdrop-blur px-6 py-3 rounded-full">
        <span class="text-2xl text-yellow-400">{renderStars(5)}</span>
        <span class="text-2xl font-bold">{avgRating}</span>
        <span class="text-primary-200">({reviews.length} reviews)</span>
      </div>
    </div>
  </section>

  <!-- Reviews Grid -->
  <section class="py-16 md:py-24">
    <div class="container mx-auto px-4">
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {
          reviews.map((review) => (
            <div class="bg-white border rounded-xl p-6 shadow-lg hover:shadow-xl transition">
              <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center">
                    <span class="text-primary-600 font-bold text-lg">{review.name.charAt(0)}</span>
                  </div>
                  <div>
                    <p class="font-bold text-gray-900">{review.name}</p>
                    <p class="text-sm text-gray-500">{review.date}</p>
                  </div>
                </div>
                <span class="text-xs bg-gray-100 px-3 py-1 rounded-full text-gray-600">
                  {review.source}
                </span>
              </div>
              <div class="text-yellow-500 text-lg mb-3">{renderStars(review.rating)}</div>
              <p class="text-gray-600 leading-relaxed">{review.text}</p>
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <!-- CTA to Leave Review -->
  <section class="py-16 md:py-20 bg-gray-100">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Happy with Our Service?</h2>
      <p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
        We'd love to hear from you! Leave us a review on Google.
      </p>
      <a
        href="https://www.google.com/search?q=M+%26+M+Plumbing+Greeneville+TN"
        target="_blank"
        rel="noopener noreferrer"
        class="bg-primary-600 hover:bg-primary-700 text-white px-8 py-4 rounded font-semibold text-lg transition inline-flex items-center gap-3"
      >
        <svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
          <path
            d="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"
          ></path>
        </svg>
        Review Us on Google
      </a>
    </div>
  </section>

  <!-- Call CTA -->
  <section class="py-16 md:py-20 bg-primary-700 text-white">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-3xl md:text-4xl font-bold mb-4">Ready to Experience Our Service?</h2>
      <p class="text-xl text-primary-100 mb-8">Join our satisfied customers. Call us today!</p>
      <a
        href="tel:+14239468310"
        class="bg-accent hover:bg-accent-hover text-white px-8 py-4 rounded font-semibold text-lg transition inline-flex items-center justify-center gap-2"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
          ></path>
        </svg>
        (423) 946-8310
      </a>
    </div>
  </section>
</Layout>
